<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Top menu item -->
        <menuitem name="1Books" id="menu_books_root" sequence="50" groups="base.group_user"
                  web_icon="zerone_books,static/description/icon.png"/>
        <menuitem id="menu_books" name='図書' parent="menu_books_root" sequence="15"/>

        <!--Search View-->
        <record id="view_zerone_books_search" model="ir.ui.view">
            <field name="name">zerone.book.search</field>
            <field name="model">zerone.book</field>
            <field name="arch" type="xml">
<!--                ===========================-->
                <search string="Books">
                <!-- 検索欄に文字を入力したら出てくる候補のカスタマイズ -->
                    <field name="code"/>
                    <field name="name"/>
                    <field name="author"/>
                <!-- グループ化のドロップダウンメニューに候補として追加する内容 -->
                    <group expand="1" string="Group By">
                        <filter string="作者" name="author_group" context="{'group_by':'author'}"/>
                <!--name="name_group"はフィルター名称です。上記fieldのname名とかぶったら表示がバグる可能性あるので回避必至。-->
                        <filter string="図書名" name="name_group" context="{'group_by':'name'}"/>
                    </group>
                </search>
<!--                ===============================-->
            </field>
        </record>
        <!--Tree View-->
        <record id="view_zerone_books_tree" model="ir.ui.view">
            <field name="name">zerone.book.tree</field>
            <field name="model">zerone.book</field>
            <field name="arch" type="xml">
                <tree string="Books">
                    <field name="name"/>
                    <field name="code"/>
                    <field name="date_last_borrowed"/>
                </tree>
            </field>
        </record>
        <!--Form View-->
        <record id="view_zerone_books_form" model="ir.ui.view">
            <field name="name">zerone.book.form</field>
            <field name="model">zerone.book</field>
            <field name="arch" type="xml">
                <form string="Books">
                    <header>
                        <button name="action_borrow" type="object" string="貸出" class="btn-primary"
                                attrs="{'invisible': [('borrowed', '=', True)]}"/>
                        <button name="action_return" type="object" string="返却" class="btn-primary"
                                attrs="{'invisible': [('borrowed', '=', False)]}"/>
                    </header>
                    <sheet string="5Books">
                        <group col="4">
                            <field name="image_128" />
                            <field name="name"/>
                            <field name="code"/>
                            <field name="author"/>
                            <field name="isbn"/>
                            <field name="pages"/>
                            <field name="publish_date"/>
                            <field name="publisher"/>
                            <field name="price"/>
                            <field name="binding_type"/>
                            <field name="borrowed"/>
                            <field name="date_last_borrowed"/>
                            <field name="description" colspan="4"/>
                            <field name='e_link' colspan="4"/>

                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <!--action-->
        <record id="action_zerone_books" model="ir.actions.act_window">
            <field name="name">図書管理（action viewにおける表示）</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">zerone.book</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[]</field>
            <!-- こちらはsearch欄の場所で最初から上記設定したgroup化について最初からデフォルトとなってる設定 -->
            <field name="context">{'search_default_author_group': 1, 'search_default_name_group':1}</field>
            <!-- ここのrefはsearch viewのidを入れないといけないです -->
            <field name="search_view_id" ref="view_zerone_books_search"/>
        </record>
        <!--Menu-->
        <!-- nameは子メニューの名称 -->
        <menuitem action="action_zerone_books"
                  id="menu_zerone_books"
                  name="3図書管理"
                  parent="menu_books_root"
                  sequence="20"
        />
    </data>
</odoo>